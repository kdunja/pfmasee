<div style="display: flex; gap: 16px; align-items: flex-start; flex-wrap: nowrap;">

  <!-- Transactions -->
  <div style="flex: 1 1 auto; min-width: 0;">
    <mat-card class="cardWithShadow">
      <mat-card-content class="p-24">

        <!-- Gornji deo sa informacijama o računu -->
        <div style="background: linear-gradient(90deg, #00a0e4, #0077b6); color: white; border-radius: 8px; padding: 20px; margin-bottom: 16px;">
          <div style="display: flex; justify-content: space-between; align-items: center;">

            <!-- Leva strana sa ikonom i brojem računa -->
<div style="display: flex; align-items: center; gap: 12px;">
  <mat-icon style="font-size: 25px; color: rgba(255, 255, 255);">account_balance_wallet</mat-icon>
  <div>
    <div style="font-size: 18px; font-weight: 600;">Current account</div>
    <div style="font-size: 14px; opacity: 0.8;">1234 56678 89056</div>
  </div>
</div>

            <!-- Desna strana sa saldo i oznakom -->
            <div style="text-align: right;">
              <div style="font-size: 24px; font-weight: 700;">12,340,000.00 RSD</div>
              <div style="font-size: 12px; opacity: 0.7;">AVAILABLE BALANCE</div>
            </div>

          </div>

          <!-- Donji tasteri za filtere statusa -->
          <div style="margin-top: 16px; display: flex; gap: 12px; border-top: 1px solid rgba(255,255,255,0.3); padding-top: 10px;">
            <button
              *ngFor="let kind of kinds"
              (click)="selectedKind = kind"
              [style.backgroundColor]="selectedKind === kind ? '#004f7c' : 'transparent'"
              [style.color]="selectedKind === kind ? 'white' : '#aaddff'"
              style="border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer; font-size: 14px; font-weight: 600;"
            >
              {{ kind }}
            </button>
          </div>
        </div>

        <!-- Transactions tabela -->
        <div class="table-responsive m-t-16">
          <table mat-table [dataSource]="dataSource" class="w-100">
            
            <!-- Beneficiary Column -->
            <ng-container matColumnDef="assigned">
              <th mat-header-cell *matHeaderCellDef class="f-w-600 mat-subtitle-1 f-s-14">Beneficiary name</th>
              <td mat-cell *matCellDef="let element">
                <div style="display: flex; align-items: center; gap: 16px;">
                  <img [src]="element.imagePath" alt="users" width="40" class="rounded-circle" />
                  <div style="display: flex; flex-direction: column;">
                    <h6 class="mat-subtitle-1 f-s-14 f-w-600">{{ element.uname }}</h6>
                    <button
                      mat-button
                      color="primary"
                      class="mat-body-1 f-s-12 bg-light-primary text-primary rounded-pill px-3 py-1"
                      matTooltip="{{ element.category || 'Click to enter' }}"
                      aria-label="Category tooltip"
                    >
                      {{ element.category || 'Click to enter' }}
                    </button>
                  </div>
                </div>
              </td>
            </ng-container>

            <!-- Direction Column -->
            <ng-container matColumnDef="direction">
              <th mat-header-cell *matHeaderCellDef></th> 
              <td mat-cell *matCellDef="let element">
                <span
                  class="material-icons"
                  [ngStyle]="{
                    'color': element.direction === 'credit' ? 'green' : 'red',
                    'font-size': '20px',
                    'vertical-align': 'middle'
                  }"
                >
                  {{ element.direction === 'credit' ? 'arrow_upward' : 'arrow_downward' }}
                </span>
              </td>
            </ng-container>

            <!-- Transaction date Column -->
            <ng-container matColumnDef="name">
              <th mat-header-cell *matHeaderCellDef class="f-w-600 mat-subtitle-1 f-s-14">Transaction date</th>
              <td mat-cell *matCellDef="let element" class="mat-body-1">{{ element.date | date: 'dd.MM.yyyy' }}</td>
            </ng-container>

            <!-- Currency + Split transaction Column -->
            <ng-container matColumnDef="budget">
              <th mat-header-cell *matHeaderCellDef class="f-w-600 mat-subtitle-1 f-s-14">Currency</th>
              <td mat-cell *matCellDef="let element" class="mat-body-1">
                <div style="display: flex; flex-direction: column; align-items: flex-start; gap: 6px;">
                  <span>{{ element.budget }}k RSD</span>
                  <button
                    mat-stroked-button
                    color="primary"
                    class="f-s-10 mt-1"
                    (click)="onSplitTransaction(element)"
                    style="align-self: flex-start; padding: 2px 8px; font-weight: 500;"
                  >
                    Split transaction
                  </button>
                </div>
              </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>

          </table>
        </div>
      </mat-card-content>
    </mat-card>
  </div>

  <!-- Financial Overview -->
  <div style="flex: 0 0 320px;">
    <mat-card class="cardWithShadow">
      <mat-card-content class="p-24">

        <div style="display: flex; flex-direction: column; gap: 12px; margin-top: 12px;">

          <!-- Tab dugmad -->
          <button mat-flat-button
            (click)="setSelectedTab('overview')"
            [ngStyle]="{
              'background-color': selectedTab === 'overview' ? '#0078b6' : '#00a2df',
              'color': 'white',
              'justify-content': 'flex-start',
              'border-radius': '8px',
              'font-weight': '600',
              'font-size': '14px',
              'padding': '12px 16px',
              'text-transform': 'none',
              'display': 'flex',
              'align-items': 'center'
            }">
            <mat-icon style="margin-right: 12px; font-size: 20px;">insights</mat-icon>
            Financial Overview
          </button>

          <button mat-flat-button
            (click)="setSelectedTab('budgets')"
            [ngStyle]="{
              'background-color': selectedTab === 'budgets' ? '#0078b6' : '#00a2df',
              'color': 'white',
              'justify-content': 'flex-start',
              'border-radius': '8px',
              'font-weight': '600',
              'font-size': '14px',
              'padding': '12px 16px',
              'text-transform': 'none',
              'display': 'flex',
              'align-items': 'center'
            }">
            <mat-icon style="margin-right: 12px; font-size: 20px;">insert_chart</mat-icon>
            Budgets
          </button>

          <button mat-flat-button
            (click)="setSelectedTab('savings')"
            [ngStyle]="{
              'background-color': selectedTab === 'savings' ? '#0078b6' : '#00a2df',
              'color': 'white',
              'justify-content': 'flex-start',
              'border-radius': '8px',
              'font-weight': '600',
              'font-size': '14px',
              'padding': '12px 16px',
              'text-transform': 'none',
              'display': 'flex',
              'align-items': 'center'
            }">
            <mat-icon style="margin-right: 12px; font-size: 20px;">savings</mat-icon>
            Saving Goals
          </button>

          <button mat-flat-button
            (click)="setSelectedTab('rules')"
            [ngStyle]="{
              'background-color': selectedTab === 'rules' ? '#0078b6' : '#00a2df',
              'color': 'white',
              'justify-content': 'flex-start',
              'border-radius': '8px',
              'font-weight': '600',
              'font-size': '14px',
              'padding': '12px 16px',
              'text-transform': 'none',
              'display': 'flex',
              'align-items': 'center'
            }">
            <mat-icon style="margin-right: 12px; font-size: 20px;">rule</mat-icon>
            Categorization Rules
          </button>

          <!-- Prikaz dodatnog sadržaja za selektovan tab -->
          <div *ngIf="selectedTab === 'overview'" style="margin-top: 24px;">

            <mat-form-field appearance="outline" style="width: 100%; margin-bottom: 12px;">
              <mat-label>From</mat-label>
              <input matInput [matDatepicker]="picker1">
              <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
              <mat-datepicker #picker1></mat-datepicker>
            </mat-form-field>

            <mat-form-field appearance="outline" style="width: 100%; margin-bottom: 12px;">
              <mat-label>To</mat-label>
              <input matInput [matDatepicker]="picker2">
              <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
              <mat-datepicker #picker2></mat-datepicker>
            </mat-form-field>

            <mat-form-field appearance="outline" style="width: 100%; margin-bottom: 12px;">
              <mat-label>Transaction Type</mat-label>
              <mat-select>
                <mat-option value="expenses">Expenses</mat-option>
                <mat-option value="income">Income</mat-option>
              </mat-select>
            </mat-form-field>

            <mat-form-field appearance="outline" style="width: 100%; margin-bottom: 12px;">
              <mat-label>Account</mat-label>
              <mat-select>
                <mat-option value="all">All accounts</mat-option>
              </mat-select>
            </mat-form-field>

            <mat-form-field appearance="outline" style="width: 100%; margin-bottom: 12px;">
              <mat-label>Beneficiary</mat-label>
              <input matInput>
              <button mat-icon-button matSuffix>
                <mat-icon>search</mat-icon>
              </button>
            </mat-form-field>

            <div style="display: flex; flex-direction: column; gap: 8px; margin-top: 12px;">
              <button mat-flat-button style="background-color: #7aa52d; color: white;">Filter Transactions</button>
              <button mat-flat-button style="background-color: #00a2df; color: white;">Clear Selections</button>
            </div>

          </div>

        </div>
      </mat-card-content>
    </mat-card>
  </div>

</div>

